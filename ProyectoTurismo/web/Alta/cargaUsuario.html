<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>ABM Usuario - Alta</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="../js/buscar.js"></script>
    </head>
    <body>
        <form method="POST" action="../AltaUsuario">        
            <table>
                <thead>
                    <tr>
                        <th>ABM Usuario - Alta</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label for="nombreUsuario">Nombre de usuario: </label></td>
                        <td><input type="text" name="nombreUsuario" id="nombreUsuario" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="passwordUsuario">Password: </label></td>
                        <td><input type="text" name="passwordUsuario" id="passwordUsuario" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="linkUsuario">Link: </label></td>
                        <td><input type="text" name="linkUsuario" id="linkUsuario" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="preguntaSecretaUsuario">Pregunta secreta: </label></td>
                        <td><input type="text" name="preguntaSecretaUsuario" id="preguntaSecretaUsuario" value="" /></td>
                    </tr>                    
                    <tr>
                        <td><label for="respuestaUsuario">Respuesta: </label></td>
                        <td><input type="text" name="respuestaUsuario" id="respuestaUsuario" value="" /></td>                       
                    </tr>
                    <tr>
                        <td><label for="estado">Estado: </label></td>
                        <td><select name="estado" id="estado">
                                <option value="x0"> --- </option>
                            </select></td>                    
                    </tr>
                    <tr><td><br /><br /><br /></td></tr>
                    <tr>
                        <td><label for="nombrePersona">Primer nombre: </label></td>
                        <td><input type="text" name="nombrePersona" id="nombrePersona" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="segNombrePersona">Segundo nombre: </label></td>
                        <td><input type="text" name="segNombrePersona" id="segNombrePersona" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="apellidoPersona">Apellido: </label></td>
                        <td><input type="text" name="apellidoPersona" id="apellidoPersona" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="fechaNacimientoPersona">Fecha nacimiento: </label></td>
                        <td><input type="date" name="fechaNacimientoPersona" id="fechaNacimientoPersona" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="tipoDocumentoPersona">Tipo documento: </label></td>
                        <td><select name="tipoDocumentoPersona" id="tipoDocumentoPersona">
                               <option value="x0">---</option>
                            </select></td>
                    </tr>
                    <tr>
                        <td><label for="nroDocumentoPersona">Número de Documento: </label></td>
                        <td><input type="text" name="nroDocumentoPersona" id="nroDocumentoPersona" value="" /></td>
                    </tr>
                </tbody>
            </table>
            <br />
            <br />
            <table>
                <thead>
                    <tr>
                        <th>ABM Usuario - Contactos</th>
                    </tr>
                </thead>
                <tbody  id="contactos">
                    <tr>
                        <tr>
                        <td><label for="tipoContacto1">Tipo de Contacto: </label></td>
                        <td>
                            <select name="tipoContacto1" id="tipoContacto">
                                <option value="x0">---</option>
                            </select>
                        </td>
                        <td><input type="button" name="+tipoContacto" id="masContacto" value="-"/></td>
                    </tr>
                    <tr>
                        <td><label for="detalleContactos1">Detalle: </label></td>
                        <td><input type="text" name="detalleContactos1" id="detalleContactos" value="" /></td>
                    </tr>
                    <tr>
                        <td>
                            <input type="button" value="Agregar Contacto" name="envContacto" id="envContacto"/>
                            <input style="display:none" id="cantidadContactos" name="cantidadContactos" />
                        </td>
                    </tr>       
                </tbody>
            </table>            
            <br />
            <br />
            <table>
                <thead>
                    <tr>
                        <th>ABM Usuario - Domicilio</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label for="Pais">Pais: </label></td>
                        <td><select name="Pais" id="Pais">
                                <option value="x0">---</option>
                            </select></td>
                    <tr>
                        <td><label for="Provincia">Provincia: </label></td>
                        <td><select name="Provincia" id="Provincia">
                                <option value="x0">---</option>
                            </select></td>
                    </tr>
                    <tr>
                        <td><label for="Ciudad">Cuidad: </label></td>
                        <td><select name="Ciudad" id="Ciudad">
                                <option value="x0">---</option>
                            </select></td>
                    </tr>
                    <tr>
                        <td><label for="Barrio">Barrio: </label></td>
                        <td><select name="Barrio" id="Barrio">
                                <option value="0">---</option>
                            </select></td>
                    </tr>
                    <tr>
                        <td><label for="calleDomicilio">Calle: </label></td>
                        <td><input type="text" name="calleDomicilio" id="calleDomicilio" /></td>
                    </tr>
                    <tr>
                        <td><label for="nroDomicilio">Número: </label></td>
                        <td><input type="text" name="nroDomicilio" id="nroDomicilio" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="nroPiso">Piso: </label></td>
                        <td><input type="text" name="nroPiso" id="nroPiso" value="" /></td>
                    </tr>  
                    <tr>
                        <td><label for="departamentoDomicilio">Departamento: </label></td>
                        <td><input type="text" name="departamentoDomicilio" id="departamentoDomicilio" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="torreDomicilio">Torre: </label></td>
                        <td><input type="text" name="torreDomicilio" id="torreDomicilio" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="manzanaDomicilio">Manzana: </label></td>
                        <td><input type="text" name="manzanaDomicilio" id="manzanaDomicilio" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="loteDomicilio">Lote: </label></td>
                        <td><input type="text" name="loteDomicilio" id="loteDomicilio" value="" /></td>
                    </tr>
                    <tr>
                        <td><label for="codigoPostalDomicilio">Código Postal: </label></td>
                        <td><input type="text" name="codigoPostalDomicilio" id="codigoPostalDomicilio" value="" /></td>
                    </tr>
                </tbody>
            </table>
            <br />
            <br />
            <table>
                <thead>
                    <tr>
                        <th>ABM Usuario - Observaciones</th>
                    </tr>
                </thead>    
                <tbody>
                    <tr>
                        <td><label for="Observaciones">Observacion: </label></td>
                        <td><textarea name="Observaciones" rows="4" cols="20">
                            </textarea></td>
                    </tr>
                </tbody>
            </table>
            <input type="submit" value="Enviar" name="envClientes" />
        </form>
    </body>
    <script>
        //Declaro variables utiles
        var cantidadContactos = 1;
        var eliminarCotacto = document.getElementById("masContacto");
        var pais = document.getElementById("Pais");
        var provincia = document.getElementById("Provincia");
        var ciudad = document.getElementById("Ciudad");
        var barrio = document.getElementById("Barrio");
        
        //Traigo datos
        buscar("TipoDocumento",document.getElementById("tipoDocumentoPersona"));
        buscar("TipoContacto",document.getElementById("tipoContacto"));
        buscar("Pais",pais);
        buscar("Estados",document.getElementById("estado"));
        
        //Manejo eventos
        
        //Evento utilizado para saber si se cargo algun contacto
        document.getElementById("tipoContacto").onchange = function(){
            if(document.getElementById("cantidadContactos").value === "") 
                document.getElementById("cantidadContactos").value = 1;
        };
        
        //Eliminar Contacto
        eliminarCotacto.onclick = function(){
            this.parentNode.parentNode.nextSibling.nextSibling.remove();
            this.parentNode.parentNode.remove();
            document.getElementById("cantidadContactos").value = --cantidadContactos;
        };
        
        // Agregar contacto
        document.getElementById("envContacto").onclick = function(){
            var tabla = document.getElementById("contactos");
            var filaTipoContacto = tabla.insertRow(0);
            var filaDetalle = tabla.insertRow(1);
            tabla.insertRow(2).appendChild(document.createElement("Br"));
            var labelDetalle = filaDetalle.insertCell(0);
            var inputDetalle = filaDetalle.insertCell(1);
            var labelTipoContacto = filaTipoContacto.insertCell(0);
            var selectTipoContacto = filaTipoContacto.insertCell(1);
            var buttonTipoContacto = filaTipoContacto.insertCell(2);
            var label = document.createElement("Label");            
            cantidadContactos++;
            label.setAttribute("for","tipoContacto"+cantidadContactos);
            label.innerHTML = "Tipo de Contacto: ";
            labelTipoContacto.appendChild(label);
            var select = document.createElement("Select");
            var option = document.createElement("Option");
            select.setAttribute("name","tipoContacto"+cantidadContactos);
            select.setAttribute("id","tipoContacto"+cantidadContactos);
            option.setAttribute("value","0");
            option.innerHTML = "---";
            select.appendChild(option);
            selectTipoContacto.appendChild(select);
            buscar("TipoContacto",document.getElementById("tipoContacto"+cantidadContactos));
            var boton = document.createElement("Input");
            boton.setAttribute("type","button");
            boton.setAttribute("name","+tipoContacto"+cantidadContactos);
            boton.setAttribute("id","+tipoContacto"+cantidadContactos);
            boton.setAttribute("value","-");
            boton.onclick = function(){
                this.parentNode.parentNode.nextSibling.remove();
                this.parentNode.parentNode.nextSibling.remove();
                this.parentNode.parentNode.remove();
                document.getElementById("cantidadContactos").value = --cantidadContactos;
            };
            buttonTipoContacto.appendChild(boton);
            var label2 = document.createElement("Label");
            label2.setAttribute("for","detalleContactos"+cantidadContactos);
            label2.innerHTML = "Detalle: ";
            labelDetalle.appendChild(label2);
            var input = document.createElement("Input");
            input.setAttribute("type","text");
            input.setAttribute("name","detalleContactos"+cantidadContactos);
            input.setAttribute("type","detalleContactos"+cantidadContactos);
            inputDetalle.appendChild(input);                
            document.getElementById("cantidadContactos").value = cantidadContactos;
        };
        
        //Funcion de cambiar provincia cuando cambia el pais
        pais.onchange = function(){            
            provincia.options.length = 0;
            agregarOpcion(provincia);
            var res = pais[pais.selectedIndex].value;
            buscar("Provincia",provincia,res);
        };
        
        //Funcion de cambiar ciudad cuando cambia la provincia
        provincia.onchange = function(){            
            ciudad.options.length = 0;
            agregarOpcion(ciudad);
            var res = provincia[provincia.selectedIndex].value;
            buscar("Ciudad",ciudad,res);
        };
        
        //Funcion de cambiar el barrio cuando cambia la ciudad
        ciudad.onchange = function(){            
            barrio.options.length = 0;
            agregarOpcion(barrio);
            var res = ciudad[ciudad.selectedIndex].value;
            buscar("Barrio",barrio,res);
        };
        
        //Funcion usada para agregar una opcion ---
        function agregarOpcion(sel){
            var select = document.createElement("Select");
            var option = document.createElement("Option");
            option.setAttribute("value","x0");
            option.innerHTML = "---";
            sel.appendChild(option);
        };
    </script>
</html>
